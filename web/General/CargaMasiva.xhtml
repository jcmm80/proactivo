<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <section class="contenido-contenedor">
            <div class=" contenedor top ">
                <div class="card ">
                    <div class="relative pb-2">
                        <h3 class="text-2xl ">Carga Masiva</h3>
                        <small class="block mb-4 text-gray-600">Pulsa el boton choose y elije el archivo a cargar</small>
                        <div class="espaceador"></div>
                    </div>
                    <h:form>
                        <p:fileUpload value="#{usuarioController.archivoDatos}" sizeLimit="900000" allowTypes="/(\.|\/)(txt|xls)$/" mode="simple" skinSimple="true" auto="true"
                                      process="@this" 
                                      listener="#{usuarioController.subirArchivoPlano()}"/>
                    </h:form>
                </div>
                <div class="card mt-4 ">
                    <div class="relative pb-2">
                        <h3 class="text-2xl ">Datos Cargados</h3>
                        <small class="block mb-4 text-gray-600">Al hacer la carga masiva, se registran los datos en las tablas</small>
                        <div class="espaceador"></div>
                    </div>

                    <p:tabView scrollable="true">
                        <p:tab title="Estudiantes">
                            <p:dataTable  scrollable="true" rows="10" var="est" value="#{usuarioController.marchivos.estudiantes}" >
                                <p:column headerText="Identificacion">
                                    #{est.identificacion}
                                </p:column>
                                <p:column headerText="Primer Apellido">
                                    #{est.primerApellido}
                                </p:column>
                                <p:column headerText="Segundo Apedillo">
                                    #{est.segundoApellido}
                                </p:column>
                                <p:column headerText="Primer Nombre">
                                    #{est.primerNombre}
                                </p:column>
                                <p:column headerText="Segundo Nombre">
                                    #{est.segundoNombre}
                                </p:column>
                                <p:column headerText="Login">
                                    #{est.login}
                                </p:column>
                                <p:column headerText="Password">
                                    #{est.password}
                                </p:column>
                                <p:column headerText="Telefono">
                                    #{est.telefono}
                                </p:column>
                                <p:column headerText="TIde">
                                    #{est.tipo_ide}
                                </p:column>                       
                            </p:dataTable> 
                        </p:tab>
                        <p:tab title="Matriculas">
                            <p:dataTable  scrollable="true" rows="10" var="mat" value="#{usuarioController.marchivos.matriculas}" >
                                <p:column headerText="id">
                                    #{mat.id}
                                </p:column>
                                <p:column headerText="Id_estudiante">
                                    #{mat.estudiante.id}
                                </p:column>
                                <p:column headerText="Estado matricula">
                                    #{mat.estado}
                                </p:column>
                                <p:column headerText="Fecha">
                                    #{mat.fecha}
                                </p:column>
                                <p:column headerText="Seccion">
                                    #{mat.seccion.id}
                                </p:column>                       
                            </p:dataTable>  
                        </p:tab>
                        <p:tab title="Periodos">
                            <p:dataTable  scrollable="true" rows="10"  var="per" value="#{usuarioController.marchivos.periodos}" >
                                <p:column headerText="AÃ±o">
                                    #{per.anio}
                                </p:column>
                                <p:column headerText="Numero">
                                    #{per.numero}
                                </p:column>
                                <p:column headerText="fecha Inicial">
                                    #{per.fechaInicial}
                                </p:column>     
                                <p:column headerText="fecha Final">
                                    #{per.fechaFinal}
                                </p:column>  
                            </p:dataTable>  


                        </p:tab>

                        <p:tab title="Secciones">
                            <p:dataTable  scrollable="true" rows="10"  var="sec" value="#{usuarioController.marchivos.secciones}" >
                                <p:column headerText="Id">
                                    #{sec.id}
                                </p:column>
                                <p:column headerText="Denominacion">
                                    #{sec.denominacion}
                                </p:column>
                                <p:column headerText="Id_Semestre">
                                    #{sec.semestre.id}
                                </p:column>
                                <p:column headerText="Id_Programa">
                                    #{sec.programa.id}
                                </p:column>
                                <p:column headerText="Id_Periodo">
                                    #{sec.periodo.id}
                                </p:column>
                            </p:dataTable> 
                        </p:tab>
                        <p:tab title="Programas">

                            <p:dataTable scrollable="true" rows="10"  var="pro" value="#{usuarioController.marchivos.programas}" >
                                <p:column headerText="Nombre Programa">
                                    #{pro.nombre}
                                </p:column>
                                <p:column headerText="Id">
                                    #{pro.id}
                                </p:column>
                            </p:dataTable>  
                        </p:tab>

                    </p:tabView> 
                </div>






                <div class="btns-container justify-content-end">
                    <div class="btn-s">
                        <label>Almacenar</label>
                        <h:commandButton class="btn" action="#{usuarioController.almacenamientoMasivo()}" value="Almacenar" />
                    </div>
                </div>
                 

            </div>
        </section>
        <style>
            .ui-fileupload-simple .ui-button{
                border: 1px solid var(--first-color-s) !important;
                background: transparent !important;
                color: var(--first-color-s) !important;
            }
        </style>
    </h:body>
</html>

